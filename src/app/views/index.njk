{% from 'app-components/tabs.njk' import tabs %}

{% extends 'layout.njk' %}

{% block page_title %}{{ super() }} - Homepage{% endblock %}

{% block page_content %}

		<h1 class="govuk-heading-l">
			<span class="govuk-caption-m">Market access barriers</span> Dashboard
		</h1>

		{% if error %}

			{{ error }}

		{% endif %}

		<a href="{{ urls.reports.new() }}" role="button" class="dash-button">
			<span class="dash-button__heading">Report a barrier</span>
			<span class="dash-button__text">
				Report a market access barrier that is emerging, ongoing or has been resolved.
			</span>
		</a>

		{{ tabs( [
			{
				text: 'Barrier instances'
			},{
				text: 'Unfinished reports',
				href: urls.reports.index()
			}
		] ) }}

		{% if reports.length %}
			<div class="page-tab__content" id="inline-tab-1">

				<table class="standard-table">
					<thead>
						<tr class="standard-table__heading-row">
							<th class="standard-table__heading">Company affected</th>
							<th class="standard-table__heading">Problem status</th>
							<th class="standard-table__heading">Report started by</th>
							<th class="standard-table__heading standard-table__heading--active">Report started</th>
							<th class="standard-table__heading">Action</th>
						</tr>
					</thead>
					<tbody>
						{% for report in reports %}
						<tr class="standard-table__row">
							<td class="standard-table__cell">
								{{ report.company_name or '---' }}
							</td>
							<td class="standard-table__cell">
								{{ report.problem_status.name or '---' }}
							</td>
							<td class="standard-table__cell">
								{{ report.created_by or '---' }}
							</td>
							<td class="standard-table__cell">
								{{ ( report.created_on | dateWithTime ) or '---' }}
							</td>
							<td class="standard-table__cell">
								<a href="{{ urls.reports.detail( report.id ) }}">Continue</a>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		{% endif %}
{% endblock %}
