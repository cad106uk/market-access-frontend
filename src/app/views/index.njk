{% from 'app-components/dashboard-heading.njk' import dashboardHeading %}

{% extends 'layout.njk' %}

{% block page_title %}{{ super() }} - Homepage{% endblock %}

{% block page_content %}

	{{ dashboardHeading( isBarriers = true ) }}

	{%- if barriers and barriers.length -%}

		<table class="standard-table standard-table--barriers">
			<thead>
				<tr class="standard-table__heading-row">
					<th class="standard-table__heading standard-table__heading--active">Date reported</th>
					<th class="standard-table__heading">Barrier title</th>
					<th class="standard-table__heading">Sectors affected</th>
					<th class="standard-table__heading">Barrier location</th>
					<th class="standard-table__heading">Resolved</th>
					{#<th class="standard-table__heading">Support needed?</th>#}
				</tr>
			</thead>
			<tbody>
				{%- for barrier in barriers %}
				<tr class="standard-table__row">
					<td class="standard-table__cell">{{ barrier.reported_on | dateOnly }}</td>
					<td class="standard-table__cell">
						<a href="{{ urls.barriers.detail( barrier.id ) }}">
							{{ barrier.barrier_title }}
						</a>
					</td>
					<td class="standard-table__cell">{{ barrier.sectors | join( ', ' ) }}</td>
					<td class="standard-table__cell">{{ barrier.country.name }}</td>
					<td class="standard-table__cell">{{ 'Yes' if barrier.resolved else 'No' }}</td>
					{#<td class="standard-table__cell">
						{% if barrier.supportNeeded -%}
							<span class="warning-icon" aria-hidden="true">!</span>Yes
							{% if not barrier.hasContributors -%}
								<br>
								<span class="warning-icon warning-icon--error" aria-hidden="true">!</span>No contributors
							{%- endif %}
						{%- else -%}
							No
						{%- endif %}
					</td>
				</tr>#}
				{%- endfor %}
			</tbody>
		</table>

	{%- else -%}

		<p class="no-results-message">
			There are currently no market access barriers.
		</p>

	{%- endif %}
{% endblock %}
