{% from 'app-components/dashboard-heading.njk' import dashboardHeading %}

{% extends 'layout.njk' %}

{% block page_title %}{{ super() }} - Homepage{% endblock %}

{% block page_content %}

	{{ dashboardHeading( isBarriers = true ) }}

	{% if barriers and barriers.length %}

		<table class="standard-table">
			<thead>
				<tr class="standard-table__heading-row">
					<th class="standard-table__heading standard-table__heading--active">Date reported</th>
					<th class="standard-table__heading">Barrier title</th>
					<th class="standard-table__heading">Company affected</th>
					<th class="standard-table__heading">Export country</th>
					<th class="standard-table__heading">Resolved</th>
					<th class="standard-table__heading">Support needed?</th>
				</tr>
			</thead>
			<tbody>
				{% for barrier in barriers %}
				<tr class="standard-table__row">
					<td class="standard-table__cell">{{ barrier.reported_on | dateOnly }}</td>
					<td class="standard-table__cell">
						<a href="{{ urls.barriers.detail( barrier.id ) }}">
							{{ barrier.barrier_title }}
						</a>
					</td>
					<td class="standard-table__cell">{{ barrier.company.name }}</td>
					<td class="standard-table__cell">{{ barrier.country.name }}</td>
					<td class="standard-table__cell">{{ 'Yes' if barrier.resolved else 'No' }}</td>
					<td class="standard-table__cell">{{ 'Yes' if barrier.supportNeeded else 'No' }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>

	{% endif %}
{% endblock %}
